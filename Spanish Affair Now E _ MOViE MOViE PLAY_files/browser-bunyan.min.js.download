!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.bunyan=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";function c(a){if("undefined"==typeof a||null===a)return a;if(Array.isArray(a))return a.slice();if("object"==typeof a){var b={};return Object.keys(a).forEach(function(c){b[c]=a[c]}),b}return a}function d(){var a={},b=Error.stackTraceLimit,c=Error.prepareStackTrace;return Error.stackTraceLimit=3,Error.prepareStackTrace=function(b,c){var d=c[2];a.file=d.getFileName(),a.line=d.getLineNumber();var e=d.getFunctionName();e&&(a.func=e)},Error.stackTraceLimit=b,Error.prepareStackTrace=c,a}function e(a,b){b||(b="    ");var c=a.split(/\r?\n/g);return b+c.join("\n"+b)}function f(a,b){if(b){if(r[b])return;r[b]=!0}console.error(a+"\n")}function g(a){return r[a]}function h(){}function i(){}function j(a){var b="string"==typeof a?y[a.toLowerCase()]:a;return b}function k(a,b,d){if(!(this instanceof k))return new k(a,b);var e;if(void 0!==b&&(e=a,a=b,!(e instanceof k)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!a)throw new TypeError("options (object) is required");if(e){if(a.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!a.name)throw new TypeError("options.name (string) is required");if(a.stream&&a.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(a.streams&&!Array.isArray(a.streams))throw new TypeError("invalid options.streams: must be an array");if(a.serializers&&("object"!=typeof a.serializers||Array.isArray(a.serializers)))throw new TypeError("invalid options.serializers: must be an object");var f,g,i;if(e&&d){this._isSimpleChild=!0,this._level=e._level,this.streams=e.streams,this.serializers=e.serializers,this.src=e.src,f=this.fields={};var j=Object.keys(e.fields);for(i=0;i<j.length;i++)g=j[i],f[g]=e.fields[g];var l=Object.keys(a);for(i=0;i<l.length;i++)g=l[i],f[g]=a[g]}else{var m=this;if(e){for(this._level=e._level,this.streams=[],i=0;i<e.streams.length;i++){var n=c(e.streams[i]);n.closeOnExit=!1,this.streams.push(n)}this.serializers=c(e.serializers),this.src=e.src,this.fields=c(e.fields),a.level&&this.level(a.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};a.stream?m.addStream({type:"stream",stream:a.stream,closeOnExit:!1,level:a.level}):a.streams?a.streams.forEach(function(b){m.addStream(b,a.level)}):e&&a.level?this.level(a.level):e||m.addStream({type:"raw",stream:new h,closeOnExit:!1,level:a.level}),a.serializers&&m.addSerializers(a.serializers),a.src&&(this.src=!0),f=c(a),delete f.stream,delete f.level,delete f.streams,delete f.serializers,delete f.src,this.serializers&&this._applySerializers(f),Object.keys(f).forEach(function(a){m.fields[a]=f[a]})}}function l(a){return function(){function b(b){var f;b[0]instanceof Error?(h={err:e.serializers&&e.serializers.err?e.serializers.err(b[0]):k.stdSerializers.err(b[0])},f={err:!0},i=1===b.length?[h.err.message]:Array.prototype.slice.call(b,1)):"object"!=typeof b[0]&&null!==b[0]||Array.isArray(b[0])?(h=null,i=Array.prototype.slice.call(b)):(h=b[0],i=Array.prototype.slice.call(b,1));var g=c(e.fields);g.level=a;var j=h?c(h):null;return j&&(e.serializers&&e._applySerializers(j,f),Object.keys(j).forEach(function(a){g[a]=j[a]})),g.levelName=z[a],g.msg=q.apply(e,i),g.time||(g.time=new Date),e.src&&!g.src&&(g.src=d()),g.v=p,g}var e=this,h=null,i=arguments,j=null;if(this._emit)return 0===arguments.length?this._level<=a:void(this._level>a||(j=b(i),this._emit(j)));var l="unbound";if(!g[l]){var m=d();f(q("bunyan usage error: %s:%s: attempt to log with an unbound log method: `this` is: %s",m.file,m.line,this.toString()),l)}}}function m(a){var b=a.stack||a.toString();if(a.cause&&"function"==typeof a.cause){var c=a.cause();c&&(b+="\nCaused by: "+m(c))}return b}function n(){var a=[];return function(b,c){return c&&"object"==typeof c?-1!==a.indexOf(c)?"[Circular]":(a.push(c),c):c}}var o="0.2.2",p=0,q=function(a){if(null===a)return"null";if("string"!=typeof a)return a.toString();for(var b=/%[sdj%]/g,c=1,d=arguments,e=d.length,f=String(a).replace(b,function(a){if("%%"===a)return"%";if(c>=e)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(a){return"[Circular]"}break;default:return a}}),g=d[c];e>c;g=d[++c])f+=" "+g;return f},r={};h.prototype.write=function(a){a.level<u?console.log(a):a.level<v?console.info(a):a.level<w?console.warn(a):console.error(a),a.err&&a.err.stack&&console.error(a.err.stack)},i.prototype.write=function(a){function b(a,b){return Array(b+1-(a+"").length).join("0")+a}var c,d="color: DimGray",e="color: SteelBlue";c=a.level<t?"color: DeepPink":a.level<u?"color: GoldenRod":a.level<v?"color: DarkTurquoise":a.level<w?"color: Purple":a.level<x?"color: Crimson":"color: Black";var f=a.childName?a.name+"/"+a.childName:a.name,g=z[a.level].toUpperCase();g=Array(6-g.length).join(" ")+g,console.log("[%s:%s:%s:%s] %c%s%c: %s: %c%s",b(a.time.getHours(),2),b(a.time.getMinutes(),2),b(a.time.getSeconds(),2),b(a.time.getMilliseconds(),4),c,g,d,f,e,a.msg),a.err&&a.err.stack&&console.log("%c%s,",c,a.err.stack)};var s=10,t=20,u=30,v=40,w=50,x=60,y={trace:s,debug:t,info:u,warn:v,error:w,fatal:x},z={};Object.keys(y).forEach(function(a){z[y[a]]=a}),k.prototype.addStream=function(a,b){var d=this;switch((null===b||void 0===b)&&(b=u),a=c(a),!a.type&&a.stream&&(a.type="raw"),a.raw="raw"===a.type,a.level=j(a.level?a.level:b),a.level<d._level&&(d._level=a.level),a.type){case"stream":a.closeOnExit||(a.closeOnExit=!1);break;case"raw":a.closeOnExit||(a.closeOnExit=!1);break;default:throw new TypeError('unknown stream type "'+a.type+'"')}d.streams.push(a),delete d.haveNonRawStreams},k.prototype.addSerializers=function(a){var b=this;b.serializers||(b.serializers={}),Object.keys(a).forEach(function(c){var d=a[c];if("function"!=typeof d)throw new TypeError(q('invalid serializer for "%s" field: must be a function',c));b.serializers[c]=d})},k.prototype.child=function(a,b){return new this.constructor(this,a||{},b)},k.prototype.level=function(a){if(void 0===a)return this._level;for(var b=j(a),c=this.streams.length,d=0;c>d;d++)this.streams[d].level=b;this._level=b},k.prototype.levels=function(a,b){if(void 0===a)return this.streams.map(function(a){return a.level});var c;if("number"==typeof a){if(c=this.streams[a],void 0===c)throw new Error("invalid stream index: "+a)}else{for(var d=this.streams.length,e=0;d>e;e++){var f=this.streams[e];if(f.name===a){c=f;break}}if(!c)throw new Error(q('no stream with name "%s"',a))}if(void 0===b)return c.level;var g=j(b);c.level=g,g<this._level&&(this._level=g)},k.prototype._applySerializers=function(a,b){var c=this;Object.keys(this.serializers).forEach(function(d){if(!(void 0===a[d]||b&&b[d]))try{a[d]=c.serializers[d](a[d])}catch(b){f(q('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',d,b.stack||b)),a[d]=q('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',d)}})},k.prototype._emit=function(a,b){var c;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,c=0;c<this.streams.length;c++)if(!this.streams[c].raw){this.haveNonRawStreams=!0;break}var d;if(b||this.haveNonRawStreams)try{d=JSON.stringify(a,n())+"\n"}catch(b){var g=b.stack.split(/\n/g,2).join("\n");f('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+e(q("%s\n%s",a,b.stack)),g),d=q("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",b.message)}if(b)return d;var h=a.level;for(c=0;c<this.streams.length;c++){var i=this.streams[c];i.level<=h&&i.stream.write(i.raw?a:d)}return d},k.prototype.trace=l(s),k.prototype.debug=l(t),k.prototype.info=l(u),k.prototype.warn=l(v),k.prototype.error=l(w),k.prototype.fatal=l(x),k.stdSerializers={},k.stdSerializers.err=function(a){if(!a||!a.stack)return a;var b={message:a.message,name:a.name,stack:m(a),code:a.code,signal:a.signal};return b},b.exports=k,b.exports.TRACE=s,b.exports.DEBUG=t,b.exports.INFO=u,b.exports.WARN=v,b.exports.ERROR=w,b.exports.FATAL=x,b.exports.resolveLevel=j,b.exports.levelFromName=y,b.exports.nameFromLevel=z,b.exports.VERSION=o,b.exports.LOG_VERSION=p,b.exports.createLogger=function(a){return new k(a)},b.exports.safeCycles=n,b.exports.ConsoleFormattedStream=i,b.exports.ConsoleRawStream=h},{}]},{},[1])(1)});